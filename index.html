<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>map interact experiment</title>
    <style>
      #myCanvas {
        border: 2px solid #333;
        background-color: #f0f0f0;
      }
      body{
        display: flex;
        justify-content: center;
        padding-top: 50px;
      }
    </style>
</head>
<body>
    <canvas id="myCanvas" width="800" height="600">
    </canvas>
    <script>
      const canvas=document.getElementById('myCanvas');
      const ctx =canvas.getContext('2d');
      let square={
        x:100,
        y:100,
        size:50,
        isDragging: false
      };
      function drawSquare(){
        ctx.clearRect(0,0,canvas.width,canvas.height);
        ctx.fillStyle='steelblue';
        ctx.fillRect(square.x,square.y,square.size,square.size);
      }
      drawSquare();

      function getMousePosition(event){
        return {
          x: event.offsetX,
          y: event.offsetY
        };
      }

      function isMouseInSquare(mouseX,mouseY){
        return mouseX > square.x && mouseX < square.x + square.size && mouseY > square.y && mouseY < square.y+ square.size;
      }

      let dragStartOffset = {x:0, y:0};

      canvas.addEventListener('mousedown',function (event){
        if(!square.isDragging)return;

        const mousePos=getMousePosition(event);
        if(isMouseInSquare(mousePos.x,mousePos.y))square.isDragging=true;
        square.x=mousePos.x-dragStartOffset.x;
        square.y=mousePos.y-dragStartOffset.y;
        drawSquare();
      });

      canvas.addEventListener('mouseup',function (event){
        if(square.isDragging){
          square.isDragging=false;
          canvas.style.cursor='default';
        }
      });

    </script>
</body>
</html>